(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{62832:function(e,t,i){Promise.resolve().then(i.bind(i,8331))},8331:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return y}});var o=i(57437),a=i(24086),n=i(2265),s=i(93046);i(38889);var r=i(80779),l=i(65984),c=i(85269),d=i(99500),m=i(92750),h=i(74124),f=i(95742),p=i(74548),g=i.n(p);function u(e){let{dashboardData:t}=e,i=()=>{let e=[];return t.day_income&&Object.keys(t.day_income).map(i=>{e.push({day:i,...t.day_income[i]})}),e},a={};a.configParameters={rotate:{min:-90,max:90},align:{options:{left:"left",center:"center",right:"right"}},verticalAlign:{options:{top:"top",middle:"middle",bottom:"bottom"}},position:{options:["left","right","top","bottom","inside","insideTop","insideLeft","insideRight","insideBottom","insideTopLeft","insideTopRight","insideBottomLeft","insideBottomRight"].reduce(function(e,t){return e[t]=t,e},{})},distance:{min:0,max:100}},a.config={rotate:90,align:"left",verticalAlign:"middle",position:"insideBottom",distance:15,onChange:function(){let e={rotate:a.config.rotate,align:a.config.align,verticalAlign:a.config.verticalAlign,position:a.config.position,distance:a.config.distance};myChart.setOption({series:[{label:e},{label:e},{label:e},{label:e}]})}};let n={show:!0,position:a.config.position,distance:a.config.distance,align:a.config.align,verticalAlign:a.config.verticalAlign,rotate:a.config.rotate,formatter:"Rs.{c} ",fontSize:16,rich:{name:{}}},s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Total","Profit","Cost"]},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:[{type:"category",axisTick:{show:!1},data:i().map(e=>e.day)}],yAxis:[{type:"value"}],series:[{name:"Total",type:"bar",barGap:0,label:n,emphasis:{focus:"series"},data:i().map(e=>e.amount),itemStyle:{color:"black"}},{name:"Profit",type:"bar",label:n,emphasis:{focus:"series"},data:i().map(e=>e.amount-e.cost),itemStyle:{color:"green"}},{name:"Cost",type:"bar",label:n,emphasis:{focus:"series"},data:i().map(e=>e.cost),itemStyle:{color:"red"}}]};return(0,o.jsx)("div",{children:(0,o.jsx)(r.Z,{style:{width:"95vw",height:"300px"},option:s})})}function y(){let e=(0,s.v9)(e=>e.user_data.USER_DATA),t=(0,s.v9)(e=>e.user_data.loading),[i,p]=(0,n.useState)({}),[y,b]=(0,n.useState)(g()(new Date));(0,n.useEffect)(()=>{t||(async()=>{let t=(0,a.JU)((0,a.hJ)((0,a.ad)(),"dashboard",e.shop_id,y.$y.toString()),(y.$M+1).toString());try{(0,a.cf)(t,e=>{e.exists()?p(e.data()):p({daily_income:{},total_cost:0,total_income:0})})}catch(e){console.error("Error getting document:",e)}})()},[t,y]);let x={tooltip:{trigger:"item",formatter:"{b}: {c}"},legend:{top:"5%",left:"center"},color:["red","green"],series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,position:"center",formatter:"{b}: Rs. {c}"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:i.total_cost,name:"Cost"},{value:i.total_income,name:"Profit"}]}]};return(0,o.jsx)("div",{className:"flex items-center flex-wrap justify-evenly",children:(0,o.jsxs)(l.Z,{className:"flex items-center flex-wrap",variant:"elevation",elevation:2,children:[(0,o.jsxs)("div",{className:"mx-4",children:[(0,o.jsx)(c.Z,{className:"p-2",variant:"h6",children:"Monthly Total Income"}),(0,o.jsx)(h._,{dateAdapter:m.y,children:(0,o.jsx)(d.C,{components:["DatePicker","DatePicker"],children:(0,o.jsx)(f.M,{value:y,label:"select month",views:["month","year"],onChange:e=>b(e)})})})]}),(0,o.jsx)(r.Z,{style:{width:"400px",height:"400px"},option:x}),(0,o.jsxs)("div",{children:[(0,o.jsx)(c.Z,{className:"text-center",variant:"h6",children:"Daily Income Chart"}),(0,o.jsx)(u,{dashboardData:i})]})]})})}}},function(e){e.O(0,[358,704,502,679,274,46,19,14,870,889,547,971,938,744],function(){return e(e.s=62832)}),_N_E=e.O()}]);